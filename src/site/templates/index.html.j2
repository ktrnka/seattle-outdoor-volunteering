<!doctype html>
<html data-theme="light">
<head>
  <meta charset="utf-8">
  <title>Seattle Outdoor Volunteer Calendar</title>
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@1.5.10/css/pico.min.css">
  <style>
    .add-to-calendar { font-size: 0.8em; padding: 0.25rem 0.5rem; }
    .date-header { 
      background-color: white; 
      font-weight: bold; 
      text-align: center; 
      font-size: 1.1em;
      padding-top: 1.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid #dee2e6;
    }
    .date-header:first-child {
      padding-top: 0.75rem;
    }
    /* Remove alternating row colors */
    table[role="grid"] tbody tr {
      background-color: transparent;
    }
  </style>
</head>
<body>
  <main class="container">
    <h1>Outdoor Volunteer Opportunities (Seattle-area)</h1>
    <p><small>
      Events are automatically collected from multiple sources (Green Seattle Partnership, Seattle Parks & Recreation, Seattle Parks Foundation)
      and deduplicated to show the most comprehensive information available.
    </small></p>
    
    <table role="grid">
      <tbody>
      {% for date_group in events_by_date %}
        <tr class="date-header">
          <td colspan="4">{{ date_group.date.strftime('%A, %-m/%-d') }}</td>
        </tr>
        {% for e in date_group.events %}
        <tr>
          <td>
            {% if e.is_date_only %}
              <small>Time unknown</small>
            {% else %}
              <small>{{ e.start.strftime('%-I:%M%p')|lower }} - {{ e.end.strftime('%-I:%M%p')|lower }}</small>
            {% endif %}
          </td>
          <td><a href="{{ e.url }}">{{ e.title }}</a></td>
          <td>
            {% if e.venue %}
              {{ e.venue }}
              {% if e.maps_url %} (<a href="{{ e.maps_url }}" target="_blank">{{ e.address }}</a>){% endif %}
            {% elif e.address and e.address.lower() != 'none' %}
              {% if e.maps_url %}<a href="{{ e.maps_url }}" target="_blank">{{ e.address }}</a>{% else %}{{ e.address }}{% endif %}
            {% else %}
              Location TBD
            {% endif %}
          </td>
          <td>
            <a
              href="https://calendar.google.com/calendar/render?action=TEMPLATE
&text={{ e.title|urlencode }}
&dates={{ e.start_utc.strftime('%Y%m%dT%H%M%SZ') }}/{{ e.end_utc.strftime('%Y%m%dT%H%M%SZ') }}
&location={{ (e.address or e.venue or '')|urlencode }}"
              class="add-to-calendar" role="button" target="_blank">Add to Google</a>
            <!-- TODO: Outlook, Apple -->
          </td>
        </tr>
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
    <footer><small>Built automatically every night.  Data may lag sources.</small></footer>
  </main>
</body>
</html>
